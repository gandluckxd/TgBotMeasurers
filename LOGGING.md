# –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ [Loguru](https://github.com/Delgan/loguru) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –≤ –±–æ—Ç–µ.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`bot/utils/logger_config.py`)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ª–æ–≥–æ–≤
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ retention

2. **Middleware** (`bot/middlewares/logging_middleware.py`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö Message –∏ CallbackQuery
   - –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã**:
   - `@log_command` - –¥–ª—è –∫–æ–º–∞–Ω–¥
   - `@log_callback` - –¥–ª—è callback –∑–∞–ø—Ä–æ—Å–æ–≤
   - `@log_notification` - –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - `@log_db_operation` - –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –ë–î

## –§–∞–π–ª—ã –ª–æ–≥–æ–≤

### 1. bot_YYYY-MM-DD.log
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –í—Å–µ –ª–æ–≥–∏ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π

**–§–æ—Ä–º–∞—Ç:**
```
YYYY-MM-DD HH:mm:ss.SSS | LEVEL | module:function:line | message
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Rotation: `00:00` (–ø–æ–ª–Ω–æ—á—å)
- Retention: `30 days`
- Compression: `zip`
- Encoding: `utf-8`

### 2. user_actions_YYYY-MM-DD.log
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –¢–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–æ–º–∞–Ω–¥—ã, callbacks, —Å–æ–æ–±—â–µ–Ω–∏—è)

**–§–æ—Ä–º–∞—Ç:**
```
YYYY-MM-DD HH:mm:ss.SSS | LEVEL | USER_ID | USERNAME | ACTION | message
```

**–§–∏–ª—å—Ç—Ä:** `"user_id" in record["extra"]`

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Rotation: `00:00`
- Retention: `60 days` (–¥–æ–ª—å—à–µ –¥–ª—è –∞—É–¥–∏—Ç–∞)
- Compression: `zip`

### 3. errors_YYYY-MM-DD.log
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –¢–æ–ª—å–∫–æ WARNING, ERROR –∏ CRITICAL

**–§–æ—Ä–º–∞—Ç:**
```
YYYY-MM-DD HH:mm:ss.SSS | LEVEL | module:function:line | message
{exception traceback}
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Level: `WARNING` –∏ –≤—ã—à–µ
- Rotation: `00:00`
- Retention: `90 days` (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—Ä–æ–∫)
- Compression: `zip`
- Backtrace: `True`
- Diagnose: `True`

### 4. database_YYYY-MM-DD.log
**–°–æ–¥–µ—Ä–∂–∏—Ç:** –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**–§–æ—Ä–º–∞—Ç:**
```
YYYY-MM-DD HH:mm:ss.SSS | LEVEL | OPERATION | message
```

**–§–∏–ª—å—Ç—Ä:** `"operation" in record["extra"]`

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- Level: `DEBUG` –∏ –≤—ã—à–µ
- Rotation: `00:00`
- Retention: `14 days`
- Compression: `zip`

## Middleware –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### LoggingMiddleware

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è:

**–î–ª—è Message:**
- User ID, username, full name
- –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (–∫–æ–º–∞–Ω–¥–∞, —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ –∏ —Ç.–¥.)
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ (–ø–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Ç–µ–∫—Å—Ç–∞)

**–î–ª—è CallbackQuery:**
- User ID, username, full name
- –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Callback data

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- –ò–∑–º–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º stack trace
- –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

## –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

### @log_db_operation(operation_name)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î

**–ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç:**
- –ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ (DEBUG)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (telegram_id, user_id –∏ —Ç.–¥.)
- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–º—Å)
- –û—à–∏–±–∫–∏ —Å traceback

**–ü—Ä–∏–º–µ—Ä:**
```python
@log_db_operation("GET USER BY TELEGRAM ID")
async def get_user_by_telegram_id(session, telegram_id):
    ...
```

**–í—ã–≤–æ–¥:**
```
üîµ –ë–î –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞—Ç–∞: GET USER BY TELEGRAM ID | TelegramID:123
‚úÖ –ë–î –æ–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: GET USER BY TELEGRAM ID | TelegramID:123 | Result: users ID:5 | –í—Ä–µ–º—è: 15.23ms
```

### @log_notification(notification_type)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç:**
- –ü–æ–ø—ã—Ç–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π
- –£—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á—É
- –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- –û—à–∏–±–∫–∏ Telegram API

**–ü—Ä–∏–º–µ—Ä:**
```python
@log_notification("ASSIGNMENT_TO_MEASURER")
async def send_assignment_notification_to_measurer(bot, measurer, measurement):
    ...
```

**–í—ã–≤–æ–¥:**
```
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ASSIGNMENT_TO_MEASURER ‚Üí Measurer:123456
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ASSIGNMENT_TO_MEASURER ‚Üí Measurer:123456 | –í—Ä–µ–º—è: 150.45ms
```

## –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### DEBUG
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ù–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ü–∏–π –ë–î
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```
üîµ –ë–î –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞—Ç–∞: GET MEASUREMENTS BY USER | UserID:123
```

### INFO
- –û–±—ã—á–Ω—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–∏–º–µ—Ä:**
```
üìù –ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞: '/start' | –û—Ç: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ (@ivan, ID: 123)
‚úÖ –ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ: '/start'
```

### WARNING
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- –ù–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (–Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)

**–ü—Ä–∏–º–µ—Ä:**
```
‚ö†Ô∏è –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞
```

### ERROR
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è
- –ù–µ—É–¥–∞—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ callback | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 123 | –û—à–∏–±–∫–∞: ValueError: Invalid ID
```

### CRITICAL
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- –û—Ç–∫–∞–∑ —Å–∏—Å—Ç–µ–º—ã

## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
```
<green>{time:YYYY-MM-DD HH:mm:ss.SSS}</green> |
<level>{level: <8}</level> |
<cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> |
<level>{message}</level>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¶–≤–µ—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
- –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ—É–Ω–∫—Ü–∏–∏

### –§–∞–π–ª–æ–≤—ã–π –≤—ã–≤–æ–¥
```
{time:YYYY-MM-DD HH:mm:ss.SSS} |
{level: <8} |
{name}:{function}:{line} |
{message}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ë–µ–∑ —Ü–≤–µ—Ç–æ–≤
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## Bind –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã

### User context
```python
user_logger = logger.bind(
    user_id=f"USER_{user_id}",
    username=username,
    action="COMMAND"
)
```

–ü–æ–ø–∞–¥–∞–µ—Ç –≤ `user_actions_*.log`

### Database context
```python
db_logger = logger.bind(
    operation="GET USER"
)
```

–ü–æ–ø–∞–¥–∞–µ—Ç –≤ `database_*.log`

## –†–æ—Ç–∞—Ü–∏—è –∏ retention

### –†–æ—Ç–∞—Ü–∏—è
**–ö–æ–≥–¥–∞:** –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ `00:00`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –¢–µ–∫—É—â–∏–π —Ñ–∞–π–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Å –¥–∞—Ç–æ–π
3. –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª —Å–∂–∏–º–∞–µ—Ç—Å—è –≤ ZIP

### Retention
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**
- `bot_*.log`: 30 –¥–Ω–µ–π
- `user_actions_*.log`: 60 –¥–Ω–µ–π
- `errors_*.log`: 90 –¥–Ω–µ–π
- `database_*.log`: 14 –¥–Ω–µ–π

**–ü—Ä–æ—Ü–µ—Å—Å:**
Loguru –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç —Ñ–∞–π–ª–æ–≤ –∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ.

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å
Loguru –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª—ã, —á—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π event loop.

### –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è
–õ–æ–≥–∏ –±—É—Ñ–µ—Ä–∏–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –Ω–∞ –¥–∏—Å–∫ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–º–µ—Ä—è—é—Ç—Å—è —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥:
```python
start_time = time.time()
# ... –æ–ø–µ—Ä–∞—Ü–∏—è ...
elapsed_time = (time.time() - start_time) * 1000  # ms
```

## –ü–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑

### Grep –ø–æ user_id
```bash
grep "USER_123456" logs/user_actions_*.log
```

### –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
```bash
grep "ERROR" logs/errors_*.log
```

### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ë–î
```bash
grep -E "–í—Ä–µ–º—è: [1-9][0-9]{2,}\." logs/database_*.log
```

### –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
grep -c "USER_123456.*COMMAND" logs/user_actions_*.log
```

## –°–±–æ—Ä–∫–∞ –≤ EXE

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ spec —Ñ–∞–π–ª–µ

**datas:**
```python
datas=[
    ('bot/utils/logger_config.py', 'bot/utils'),
    ('bot/utils/logging_decorators.py', 'bot/utils'),
    ('bot/utils/notification_logging.py', 'bot/utils'),
    ('bot/middlewares/logging_middleware.py', 'bot/middlewares'),
    ('database/logging_decorator.py', 'database'),
]
```

**hiddenimports:**
```python
hiddenimports=[
    'bot.utils.logger_config',
    'bot.utils.logging_decorators',
    'bot.utils.notification_logging',
    'bot.middlewares.logging_middleware',
    'database.logging_decorator',
    'inspect',
    'functools',
]
```

**runtime_hooks:**
```python
hookspath=['hooks'],
runtime_hooks=['hooks/hook-logging.py'],
```

### Hook –¥–ª—è PyInstaller

`hooks/hook-logging.py` —Å–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É `logs/` —Ä—è–¥–æ–º —Å EXE –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

## Troubleshooting

### –õ–æ–≥–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π LOG_LEVEL
- –ü–∞–ø–∫–∞ logs/ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
```python
from pathlib import Path
Path("logs").mkdir(exist_ok=True)
```

### –ö–æ–¥–∏—Ä–æ–≤–∫–∞ (–∫—Ä–æ–∫–æ–∑—è–±—Ä—ã)
**–ü—Ä–∏—á–∏–Ω–∞:** Windows –∫–æ–Ω—Å–æ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç cp1251

**–†–µ—à–µ–Ω–∏–µ 1:** –°–º–æ—Ç—Ä–∏ —Ñ–∞–π–ª—ã (–æ–Ω–∏ –≤ UTF-8)
```powershell
Get-Content logs\bot_*.log
```

**–†–µ—à–µ–Ω–∏–µ 2:** –ü–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å
```python
import sys
sys.stdout.reconfigure(encoding='utf-8')
```

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–æ–≤
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å —É—Ä–æ–≤–µ–Ω—å
```env
LOG_LEVEL=WARNING
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
Loguru –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω —Ç–æ—Ä–º–æ–∑–∏—Ç—å. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
- –£–º–µ–Ω—å—à–∏ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–≤–µ–ª–∏—á—å –±—É—Ñ–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∏—Å–∫–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- ‚ùå –ü–∞—Ä–æ–ª–∏
- ‚ùå –¢–æ–∫–µ–Ω—ã (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 10 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚ùå –ü–æ–ª–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç

### –õ–æ–≥–∏—Ä—É—é—Ç—Å—è:
- ‚úÖ User ID (–Ω–æ –Ω–µ sensitive –¥–∞–Ω–Ω—ã–µ)
- ‚úÖ Username (–ø—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è (–Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ sensitive –ø–æ–ª–µ–π)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ù–µ –≤–∫–ª—é—á–∞–π `.env` —Ñ–∞–π–ª –≤ git
2. –û–≥—Ä–∞–Ω–∏—á—å –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ `logs/`
3. –†–µ–≥—É–ª—è—Ä–Ω–æ —É–¥–∞–ª—è–π —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
4. –ò—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è debugging, –Ω–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è sensitive –¥–∞–Ω–Ω—ã—Ö

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç
–í `bot/utils/logger_config.py`:
```python
logger.add(
    "logs/bot_{time:YYYY-MM-DD}.log",
    format="...",  # <- –∏–∑–º–µ–Ω–∏—Ç—å –∑–¥–µ—Å—å
)
```

### –ò–∑–º–µ–Ω–∏—Ç—å retention
```python
logger.add(
    "logs/bot_{time:YYYY-MM-DD}.log",
    retention="7 days",  # <- –∏–∑–º–µ–Ω–∏—Ç—å –∑–¥–µ—Å—å
)
```

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª –ª–æ–≥–∞
```python
logger.add(
    "logs/custom_{time:YYYY-MM-DD}.log",
    level="INFO",
    filter=lambda record: "custom" in record["extra"],
)
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
```python
from bot.utils.logger_config import get_user_logger

user_logger = get_user_logger(
    user_id=123456,
    username="ivan",
    action="CUSTOM"
)
user_logger.info("Custom user action")
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î –æ–ø–µ—Ä–∞—Ü–∏–∏
```python
from bot.utils.logger_config import log_db_operation

log_db_operation(
    operation="CUSTOM_QUERY",
    details="–í—ã–ø–æ–ª–Ω–µ–Ω custom –∑–∞–ø—Ä–æ—Å",
    level="INFO"
)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
```python
from bot.utils.logging_decorators import log_command

@log_command
async def my_command(message: Message):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
    pass
```

## –°—Å—ã–ª–∫–∏

- [Loguru Documentation](https://loguru.readthedocs.io/)
- [Python logging](https://docs.python.org/3/library/logging.html)
- [PyInstaller Hooks](https://pyinstaller.org/en/stable/hooks.html)
